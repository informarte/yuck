name: ci

on: [push]

env:
  ACTIONS_RUNNER_DEBUG: true
  ACTIONS_STEP_DEBUG: true

jobs:
  ci:
    runs-on: ubuntu-20.04
    steps:
      - run: sudo snap install minizinc --classic
      - run: minizinc --version
      - run: minizinc --solvers
      - uses: actions/checkout@v3
      - run: pwd
      - run: make ci-tests
      - run: tar cf logs.tar tmp/
      - name: Upload artifacts
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: artifacts
          path: logs.tar
